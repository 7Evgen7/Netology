## Домашнее задание к занятию "`Репликация и масштабирование. Часть 2`" - `Камаев Евгений`

***Задание 1***

Опишите основные преимущества использования масштабирования методами:

* активный master-сервер и пассивный репликационный slave-сервер;
* master-сервер и несколько slave-серверов;
* активный сервер со специальным механизмом репликации — distributed replicated block device (DRBD);
* SAN-кластер.
Дайте ответ в свободной форме.

`Решение`

```
* Активный master-сервер и пассивный репликационный slave-сервер:
– Простое и гибкое управление: один мастер-сервер обрабатывает все запросы, а пассивный slave-сервер автоматически синхронизируются с ним.
– Быстрое восстановление после сбоев: выходит из строя основной сервер - его роль может быть быстро передана slave-серверу.
- Возможность масштабирования: добавление новых slave-серверов позволяет увеличивать производительность и масштабировать систему.
* Master-сервер и несколько slave-серверов:
– Высокая доступность: система работоспособна даже при выходе из строя одного или нескольких slave-серверов, так как остальные продолжают работать.
– Гибкое масштабирование: количество slave-серверов можно увеличивать или уменьшать по мере необходимости.
– Балансировка нагрузки: нагрузку можно равномерно распределить между несколькими slave-серверами.
* Активный сервер со специальным механизмом репликации - distributed replicated block device (DRBD):
– Масштабируемость: DRBD позволяет объединять несколько физических серверов в один виртуальный сервер, увеличивая тем самым масштабируемость системы.
– Высокая надежность: DRBD обеспечивает автоматическую синхронизацию данных между серверами и восстановление после сбоев.
– Поддержка различных платформ: DRBD работает на различных операционных системах и аппаратных платформах.
* SAN-кластер:
– Производительность: высокая пропускная способность и масштабируемость позволяет обрабатывать большие объемы данных.
– Надежность: имеются встроенные механизмы избыточности и восстановления после сбоев, что обеспечивает непрерывность работы системы.
– Доступность: оборудование может быть распределено по географическому местоположению, что повышает доступность данных.

```
---

***Задание 2***

Разработайте план для выполнения горизонтального и вертикального шаринга базы данных. База данных состоит из трёх таблиц:

пользователи,
книги,
магазины (столбцы произвольно).
Опишите принципы построения системы и их разграничение или разбивку между базами данных.

Пришлите блоксхему, где и что будет располагаться. Опишите, в каких режимах будут работать сервера.

`Решение`

<details>

![Screnshot](https://github.com/7Evgen7/Netology/blob/main/JPG/12_05_SDBSQL/12_05_2_.jpg)
  
</details>

Узкие места:
*  применение функции over (partition by c.customer_id, f.title)
*  при выполнении функции попадает f.title , что явялется избыточным, так как таблица film не используется.

```
SELECT CONCAT(c.last_name, ' ', c.first_name) AS name, SUM(p.amount)
FROM payment p
join rental r on r.rental_date = p.payment_date 
join customer c on c.customer_id = r.customer_id
join inventory i on i.inventory_id = r.inventory_id
WHERE cast(p.payment_date as date) = '2005-07-30' and cast(p.payment_date as date) < '2005-07-31'
GROUP BY c.customer_id;
```

***КОНЕЦ***
